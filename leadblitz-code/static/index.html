<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>LeadBlitz - AI Lead Generation</title>
    <meta name="description" content="LeadBlitz - AI-powered lead generation tool for finding, scoring, and converting local business leads">
    <meta property="og:title" content="LeadBlitz - AI Lead Generation">
    <meta property="og:description" content="Find, score, and convert local business leads with AI-powered analysis and automated outreach">
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css?v=20260221a">
</head>
<body>
    <!-- Landing Page -->
    <div id="landing-page" class="landing-page">
        <!-- Landing Nav -->
        <nav class="landing-nav">
            <div class="landing-nav-container">
                <div class="landing-brand">
                    <span class="brand-icon">‚ö°</span>
                    <span class="brand-text"><span style="color: #7C3AED; font-weight: 700;">Lead</span><span style="color: #F97316; font-weight: 700;">Blitz</span></span>
                </div>
                <div class="landing-nav-links">
                    <a href="#features">Features</a>
                    <a href="#how-it-works">How It Works</a>
                    <a href="#pricing">Pricing</a>
                    <a href="#" id="landingCreditsLink" onclick="showCreditsModal(); return false;" class="credits-badge" style="display: none;">
                        <span class="credits-icon">‚ö°</span>
                        <span id="landingCreditsBalance">0</span> credits
                    </a>
                    <a href="#" id="landingDashboardLink" onclick="goToDashboard(); return false;" style="display: none;">Dashboard</a>
                    <a href="#" id="landingLogoutLink" onclick="logout(); return false;" style="display: none;">Logout</a>
                    <button id="landingLoginBtn" onclick="showLoginFromLanding()" class="landing-btn-outline">Login</button>
                    <button id="landingRegisterBtn" onclick="showRegisterFromLanding()" class="landing-btn-primary">Start Free</button>
                </div>
                <button class="landing-mobile-toggle" onclick="toggleLandingMobileMenu()">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <div class="hero-badge">Powered by AI</div>
                <h1 class="hero-title">Instant Website Audits That <span class="gradient-text">Sell For You</span></h1>
                <p class="hero-subtitle">
                    LeadBlitz discovers businesses with weak websites, generates a professional audit report in seconds, and gives you everything you need to start the conversation.
                </p>
                <p class="hero-supporting" style="font-weight: 600; font-style: italic;">
                    No manual research. No guesswork. Just proof.
                </p>
                <div class="hero-highlights">
                    <span class="hero-highlight-item">AI Website Scoring</span>
                    <span class="hero-highlight-item">Client-Ready Audit Reports</span>
                    <span class="hero-highlight-item">One-Click Outreach</span>
                </div>
                <div class="hero-cta">
                    <button onclick="showRegisterFromLanding()" class="hero-btn-primary">
                        Start Free Trial
                        <span class="btn-arrow">‚Üí</span>
                    </button>
                    <button onclick="scrollToSection('how-it-works')" class="hero-btn-secondary">
                        See How It Works
                    </button>
                </div>
                <div class="hero-trust">
                    <span class="trust-item">‚úì 200 free credits</span>
                    <span class="trust-item">‚úì No credit card required</span>
                    <span class="trust-item">‚úì Cancel anytime</span>
                </div>
            </div>
            <div class="hero-visual">
                <div class="hero-card">
                    <div class="hero-card-header">
                        <span class="status-dot"></span>
                        Client Audit Report Ready
                    </div>
                    <div class="hero-card-score">
                        <div class="score-circle">28/100</div>
                        <div class="score-label">Needs significant improvement</div>
                    </div>
                    <div class="hero-tech-pills">
                        <span class="hero-pill hero-pill-red">No SSL</span>
                        <span class="hero-pill hero-pill-red">Not Responsive</span>
                        <span class="hero-pill hero-pill-amber">WordPress 5.2</span>
                        <span class="hero-pill hero-pill-red">No Analytics</span>
                        <span class="hero-pill hero-pill-green">Favicon</span>
                    </div>
                    <div class="hero-card-insights">
                        <div class="insight-item weakness">
                            <span class="insight-icon">‚ö†Ô∏è</span>
                            <div class="insight-text">
                                <span class="insight-main">WordPress 5.2 has known security vulnerabilities</span>
                                <span class="insight-sub">‚Üí Upgrade urgently recommended</span>
                            </div>
                        </div>
                        <div class="insight-item weakness">
                            <span class="insight-icon">‚ö†Ô∏è</span>
                            <div class="insight-text">
                                <span class="insight-main">No Google Analytics installed</span>
                                <span class="insight-sub">‚Üí Zero visibility into visitor behaviour</span>
                            </div>
                        </div>
                        <div class="insight-item opportunity">
                            <span class="insight-icon">üìÑ</span>
                            <div class="insight-text">
                                <span class="insight-main">One-click professional audit report ready to send</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Waitlist Section -->
        <section id="waitlist" class="waitlist-section">
            <div class="waitlist-container">
                <div class="waitlist-header">
                    <span class="waitlist-badge">Early Access</span>
                    <h2 class="waitlist-title">Be First In Line</h2>
                    <p class="waitlist-subtitle">Get exclusive early access to LeadBlitz before the public launch.</p>
                </div>

                <div class="waitlist-urgency" id="waitlistUrgency">
                    <span id="waitlistUrgencyText">First 100 members get 500 free credits</span>
                    <span class="waitlist-counter" id="waitlistCounter"></span>
                </div>

                <div class="waitlist-cards">
                    <div class="waitlist-card waitlist-card-free">
                        <div class="waitlist-card-header-tag">Free</div>
                        <h3>Join the Waitlist</h3>
                        <ul class="waitlist-perks">
                            <li>500 free credits at launch (first 100 only)</li>
                            <li>Early access before public launch</li>
                            <li>No credit card required</li>
                        </ul>
                        <form id="waitlistFreeForm" class="waitlist-form" onsubmit="submitFreeWaitlist(event)">
                            <input type="email" id="waitlistFreeEmail" placeholder="Your email address" required>
                            <input type="text" id="waitlistFreeName" placeholder="Your name (optional)">
                            <select id="waitlistFreeSource">
                                <option value="">How did you hear about us?</option>
                                <option value="reddit">Reddit</option>
                                <option value="linkedin">LinkedIn</option>
                                <option value="twitter">Twitter</option>
                                <option value="friend">Friend / Referral</option>
                                <option value="google">Google Search</option>
                                <option value="other">Other</option>
                            </select>
                            <button type="submit" class="waitlist-btn waitlist-btn-free" id="waitlistFreeBtn">
                                Join the Waitlist <span class="btn-arrow">&rarr;</span>
                            </button>
                        </form>
                    </div>

                    <div class="waitlist-card waitlist-card-founding">
                        <div class="waitlist-card-featured-tag">Recommended</div>
                        <h3>Become a Founding Member</h3>
                        <ul class="waitlist-perks">
                            <li><strong>50% off</strong> first 3 months</li>
                            <li><strong>1,000 free bonus credits</strong> (double the free tier)</li>
                            <li><strong>Founding Member</strong> badge permanently</li>
                            <li><strong>Priority access</strong> before free waitlist</li>
                        </ul>
                        <div class="founding-plans">
                            <label class="founding-plan-option">
                                <input type="radio" name="foundingPlan" value="starter" checked>
                                <span class="plan-label">Starter <span class="plan-price">$7.50<small>/mo</small></span></span>
                            </label>
                            <label class="founding-plan-option">
                                <input type="radio" name="foundingPlan" value="pro">
                                <span class="plan-label">Pro <span class="plan-price">$29.50<small>/mo</small></span></span>
                            </label>
                            <label class="founding-plan-option">
                                <input type="radio" name="foundingPlan" value="agency">
                                <span class="plan-label">Agency <span class="plan-price">$99.50<small>/mo</small></span></span>
                            </label>
                        </div>
                        <form id="waitlistFoundingForm" class="waitlist-form" onsubmit="submitFoundingWaitlist(event)">
                            <input type="email" id="waitlistFoundingEmail" placeholder="Your email address" required>
                            <input type="text" id="waitlistFoundingName" placeholder="Your name (optional)">
                            <select id="waitlistFoundingSource">
                                <option value="">How did you hear about us?</option>
                                <option value="reddit">Reddit</option>
                                <option value="linkedin">LinkedIn</option>
                                <option value="twitter">Twitter</option>
                                <option value="friend">Friend / Referral</option>
                                <option value="google">Google Search</option>
                                <option value="other">Other</option>
                            </select>
                            <button type="submit" class="waitlist-btn waitlist-btn-founding" id="waitlistFoundingBtn">
                                Pre-Order Now <span class="btn-arrow">&rarr;</span>
                            </button>
                        </form>
                    </div>
                </div>

                <div class="waitlist-social-proof">
                    <p id="waitlistSocialProof">Join others already on the waitlist</p>
                    <p class="waitlist-fine-print">No spam. We'll email you when early access opens.</p>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features-section">
            <div class="section-header">
                <span class="section-badge">Features</span>
                <h2 class="section-title">Everything you need to<br><span class="gradient-text">close more deals</span></h2>
                <p class="section-subtitle">From discovery to professional audit reports that win clients</p>
            </div>
            <div class="features-grid">
                <div class="feature-card feature-ai" style="grid-column: span 2;">
                    <div class="feature-content">
                        <h3>AI Website Scoring</h3>
                        <p>Our AI analyses every website across 12+ dimensions: technology stack, security, mobile responsiveness, analytics, SEO, and more. Get a detailed score with specific findings you can use in sales conversations.</p>
                    </div>
                </div>
                <div class="feature-card feature-reports">
                    <div class="feature-content">
                        <h3>Client-Ready Audit Reports</h3>
                        <p>Generate professional PDF audit reports branded with your agency name. Send directly to prospects as proof of value, not another cold email.</p>
                    </div>
                </div>
                <div class="feature-card feature-discovery">
                    <div class="feature-content">
                        <h3>Smart Lead Discovery</h3>
                        <p>Search any business type in any location. Find businesses with underperforming websites instantly.</p>
                    </div>
                </div>
                <div class="feature-card feature-outreach">
                    <div class="feature-content">
                        <h3>One-Click Outreach</h3>
                        <p>AI-personalised emails and SMS via Gmail, Outlook, SMTP, SendGrid, or Twilio. Multi-channel campaigns in minutes.</p>
                    </div>
                </div>
                <div class="feature-card feature-crm">
                    <div class="feature-content">
                        <h3>CRM Pipeline</h3>
                        <p>Track leads through 6 stages from discovery to close. Never lose track of an opportunity.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="how-it-works-section">
            <div class="section-header">
                <span class="section-badge">How It Works</span>
                <h2 class="section-title">From search to sale in<br><span class="gradient-text">4 simple steps</span></h2>
            </div>
            <div class="steps-container">
                <div class="step-card step-search">
                    <div class="step-content">
                        <div class="step-number">1</div>
                        <h3>Search</h3>
                        <p>Enter a business type and location. Find dentists in Manchester, plumbers in Mumbai or any niche anywhere.</p>
                    </div>
                </div>
                <div class="step-connector"></div>
                <div class="step-card step-analyze">
                    <div class="step-content">
                        <div class="step-number">2</div>
                        <h3>Analyze</h3>
                        <p>Our AI scores each website, identifying outdated designs, missing features, and sales opportunities.</p>
                    </div>
                </div>
                <div class="step-connector"></div>
                <div class="step-card step-personalize">
                    <div class="step-content">
                        <div class="step-number">3</div>
                        <h3>Personalize</h3>
                        <p>AI generates custom pitch emails based on each business's specific weaknesses and needs.</p>
                    </div>
                </div>
                <div class="step-connector"></div>
                <div class="step-card step-convert">
                    <div class="step-content">
                        <div class="step-number">4</div>
                        <h3>Convert</h3>
                        <p>Send personalized outreach, track responses, and manage deals through your CRM pipeline.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="pricing-section">
            <div class="section-header">
                <span class="section-badge">Pricing</span>
                <h2 class="section-title">Simple, transparent<br><span class="gradient-text">credit-based pricing</span></h2>
                <p class="section-subtitle">Start free with 200 credits. Scale as you grow.</p>
            </div>
            <div class="pricing-toggle">
                <span id="monthlyLabel" class="active">Monthly</span>
                <div id="pricingToggle" class="toggle-switch" onclick="togglePricingPeriod()"></div>
                <span id="annualLabel">Annual</span>
            </div>
            <p class="annual-discount-text">Get 2 months free with Annual Billing</p>
            <div class="pricing-grid">
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Starter</h3>
                        <div class="pricing-amount">
                            <span class="price" data-monthly="$15" data-annual="$150">$15</span>
                            <span class="period" data-monthly="/month" data-annual="/year">/month</span>
                        </div>
                    </div>
                    <ul class="pricing-features">
                        <li>100 credits/month*</li>
                        <li>AI lead scoring</li>
                        <li>Email outreach</li>
                        <li>SMS campaigns</li>
                        <li>CRM pipeline</li>
                    </ul>
                    <button onclick="showRegisterFromLanding()" class="pricing-btn">Get Started</button>
                </div>
                <div class="pricing-card featured">
                    <div class="pricing-badge">Most Popular</div>
                    <div class="pricing-header">
                        <h3>Professional</h3>
                        <div class="pricing-amount">
                            <span class="price" data-monthly="$59" data-annual="$590">$59</span>
                            <span class="period" data-monthly="/month" data-annual="/year">/month</span>
                        </div>
                    </div>
                    <ul class="pricing-features">
                        <li>500 credits/month*</li>
                        <li>Everything in Starter</li>
                        <li>Priority support</li>
                                            </ul>
                    <button onclick="showRegisterFromLanding()" class="pricing-btn-primary">Get Started</button>
                </div>
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Pro Team</h3>
                        <div class="pricing-amount">
                            <span class="price" data-monthly="$199" data-annual="$1990">$199</span>
                            <span class="period" data-monthly="/month" data-annual="/year">/month</span>
                        </div>
                    </div>
                    <ul class="pricing-features">
                        <li>2000 credits/month*</li>
                        <li>Everything in Professional</li>
                        <li>Dedicated support</li>
                    </ul>
                    <button onclick="showRegisterFromLanding()" class="pricing-btn">Get Started</button>
                </div>
            </div>
            <p class="pricing-footnote">* Credits delivered in weekly instalments. Optional Hunter feature requires user's own API key and credits purchased from Hunter.io</p>
        </section>

        <!-- Final CTA Section -->
        <section class="final-cta-section">
            <div class="cta-content">
                <h2>Ready to grow your agency?</h2>
                <p>Start finding high-quality leads today. No credit card required.</p>
                <button onclick="showRegisterFromLanding()" class="hero-btn-primary">
                    Start Your Free Trial
                    <span class="btn-arrow">‚Üí</span>
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="landing-footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="brand-icon">‚ö°</span>
                    <span><span style="color: #7C3AED; font-weight: 700;">Lead</span><span style="color: #F97316; font-weight: 700;">Blitz</span></span>
                </div>
                <div class="footer-links">
                    <a href="#features">Features</a>
                    <a href="#how-it-works">How It Works</a>
                    <a href="#pricing">Pricing</a>
                </div>
                <div class="footer-legal">
                    <p>GDPR & CAN-SPAM Compliant</p>
                </div>
            </div>
        </footer>
    </div>

    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-brand" onclick="showLandingPage()" style="cursor: pointer;" title="Go to Home">
                <h1>‚ö° <span style="color: #7C3AED; font-weight: 700;">Lead</span><span style="color: #F97316; font-weight: 700;">Blitz</span></h1>
            </div>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
            <div class="nav-menu" id="navMenu">
                <div class="nav-item">
                    <a href="#" onclick="showLandingPage(); return false;">Home</a>
                </div>
                <div class="nav-item">
                    <a href="/blog" target="_blank">Blog</a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('dashboard'); return false;">Dashboard</a>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="dropdown-toggle" onclick="toggleDropdown('campaignsDropdown'); return false;">
                        Campaigns <span class="arrow">‚ñº</span>
                    </a>
                    <div id="campaignsDropdown" class="dropdown-menu" onclick="event.stopPropagation();">
                        <div class="dropdown-header">Saved Searches</div>
                        <select id="campaignDropdown" onchange="switchCampaign()" class="dropdown-select" onclick="event.stopPropagation();">
                            <option value="">-- Select a Campaign --</option>
                        </select>
                        <button onclick="event.stopPropagation(); viewSelectedCampaignLeads();" class="dropdown-btn">View Selected Leads</button>
                        <button onclick="event.stopPropagation(); deleteSelectedCampaign();" class="dropdown-btn delete-btn">Delete Campaign</button>
                        <div id="campaignInfo" class="dropdown-info"></div>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="dropdown-toggle" onclick="toggleDropdown('searchDropdown'); return false;">
                        New Search <span class="arrow">‚ñº</span>
                    </a>
                    <div id="searchDropdown" class="dropdown-menu" onclick="event.stopPropagation();">
                        <div class="dropdown-header">Find New Leads</div>
                        <input type="text" id="businessType" placeholder="Business Type (e.g., dentist, plumber)" onclick="event.stopPropagation();" />
                        <input type="text" id="location" placeholder="Location (e.g., Leeds, UK)" onclick="event.stopPropagation();" />
                        <input type="number" id="limit" placeholder="Limit (max 250)" value="20" min="1" max="250" onclick="event.stopPropagation();" />
                        <label style="display:flex;align-items:center;gap:6px;font-size:12px;color:#666;margin:4px 0;" onclick="event.stopPropagation();">
                            <input type="checkbox" id="autoScoreCheckbox" checked style="width:14px;height:14px;accent-color:#8b5cf6;" onclick="event.stopPropagation();" />
                            Auto-score results (+1 credit per lead)
                        </label>
                        <div style="font-size:11px;color:#888;margin-bottom:4px;">Search costs 1 credit per lead found</div>
                        <button onclick="event.stopPropagation(); searchLeads();" class="dropdown-btn">Search</button>
                        <div id="searchStatus" class="status-text"></div>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('leads'); return false;">Leads</a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('email'); return false;">Email</a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('sms'); return false;">SMS</a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('scoring-guide'); return false;">Scoring Guide</a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('help'); return false;">Help</a>
                </div>
                <div class="nav-item credits-nav" id="creditsNavItem" style="display: none;">
                    <a href="#" onclick="showCreditsModal(); return false;" class="credits-badge">
                        <span class="credits-icon">‚ö°</span>
                        <span id="creditsBalance">0</span> credits
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="logout(); return false;">Logout</a>
                </div>
                <div class="nav-item">
                    <a href="#" onclick="showPage('settings'); return false;">Settings</a>
                </div>
                <div class="nav-item" id="adminNavItem" style="display: none;">
                    <a href="#" onclick="showPage('admin'); return false;" style="background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); padding: 8px 16px; border-radius: 6px; color: white; font-weight: 500;">Admin</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="compliance-notice">
            <strong>Compliance Notice:</strong> Use only verified or clearly published contact details. Ensure your outreach complies with GDPR / PECR / CAN-SPAM and includes an easy opt-out. Only contact businesses where you have a legitimate interest and permission.
        </div>

        <div id="page-dashboard" class="page active">

        <div id="onboardingCard" style="display: none;">
        <section class="card" style="text-align: center; padding: 48px 32px;">
            <div style="font-size: 48px; margin-bottom: 16px;">&#9889;</div>
            <h2 style="font-size: 28px; margin-bottom: 8px; background: linear-gradient(135deg, #7C3AED, #F97316); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Welcome to LeadBlitz</h2>
            <p style="color: #666; font-size: 16px; margin-bottom: 32px; max-width: 500px; margin-left: auto; margin-right: auto;">Find local businesses, score their web presence with AI, and send personalized outreach ‚Äî all in one place.</p>

            <div id="onboardingCredits" style="display: inline-flex; align-items: center; gap: 8px; background: linear-gradient(135deg, #f5f3ff, #ede9fe); padding: 10px 20px; border-radius: 24px; margin-bottom: 32px; font-weight: 600; color: #7C3AED;">
                <span>&#11088;</span> <span id="onboardingCreditBalance">50</span> free credits to get started
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; max-width: 700px; margin: 0 auto 36px auto; text-align: left;">
                <div style="background: #fafafa; border-radius: 12px; padding: 20px; border: 1px solid #eee;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <span style="background: #7C3AED; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700;">1</span>
                        <strong style="color: #333;">Search</strong>
                    </div>
                    <p style="color: #888; font-size: 13px; line-height: 1.5;">Find local businesses by type and location using Google Places.</p>
                </div>
                <div style="background: #fafafa; border-radius: 12px; padding: 20px; border: 1px solid #eee;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <span style="background: #7C3AED; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700;">2</span>
                        <strong style="color: #333;">Score</strong>
                    </div>
                    <p style="color: #888; font-size: 13px; line-height: 1.5;">AI analyzes each website and scores it for improvement potential.</p>
                </div>
                <div style="background: #fafafa; border-radius: 12px; padding: 20px; border: 1px solid #eee;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <span style="background: #7C3AED; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700;">3</span>
                        <strong style="color: #333;">Personalize</strong>
                    </div>
                    <p style="color: #888; font-size: 13px; line-height: 1.5;">Generate tailored outreach emails using AI insights.</p>
                </div>
                <div style="background: #fafafa; border-radius: 12px; padding: 20px; border: 1px solid #eee;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <span style="background: #7C3AED; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700;">4</span>
                        <strong style="color: #333;">Send</strong>
                    </div>
                    <p style="color: #888; font-size: 13px; line-height: 1.5;">Reach out via email or SMS and track results in your pipeline.</p>
                </div>
            </div>

            <div style="margin-bottom: 24px;">
                <p style="color: #999; font-size: 13px; margin-bottom: 10px;">Try one of these example searches:</p>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: center;">
                    <button onclick="fillExampleSearch('plumbers', 'Manchester')" style="background: #f5f3ff; color: #7C3AED; border: 1px solid #e9e5ff; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 13px; font-weight: 500;">Plumbers in Manchester</button>
                    <button onclick="fillExampleSearch('restaurants', 'London')" style="background: #f5f3ff; color: #7C3AED; border: 1px solid #e9e5ff; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 13px; font-weight: 500;">Restaurants in London</button>
                    <button onclick="fillExampleSearch('dentists', 'Birmingham')" style="background: #f5f3ff; color: #7C3AED; border: 1px solid #e9e5ff; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 13px; font-weight: 500;">Dentists in Birmingham</button>
                </div>
            </div>

            <button onclick="showPage('search')" style="background: linear-gradient(135deg, #7C3AED, #8b5cf6); color: white; border: none; padding: 14px 36px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 14px rgba(124,58,237,0.3);">Start Searching</button>
        </section>
        </div>

        <div id="dashboardContent">
        <section class="card">
            <h2>Dashboard</h2>
            <div class="analytics-grid">
                <div class="stat-card clickable" onclick="showAllLeads()">
                    <div class="stat-value" id="totalLeads">0</div>
                    <div class="stat-label">Total Leads</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCampaigns">0</div>
                    <div class="stat-label">Campaigns</div>
                </div>
                <div class="stat-card clickable" onclick="showStrongLeads()">
                    <div class="stat-value" id="highOpportunity">0</div>
                    <div class="stat-label">Strong Leads (&lt;30)</div>
                </div>
                <div class="stat-card clickable" onclick="showPage('email')">
                    <div class="stat-value" id="emailsSent">0</div>
                    <div class="stat-label">Emails Sent</div>
                </div>
                <div class="stat-card clickable" onclick="showPage('sms')">
                    <div class="stat-value" id="smsSent">0</div>
                    <div class="stat-label">SMS Sent</div>
                </div>
                <div class="stat-card clickable" onclick="showPage('leads')">
                    <div class="stat-value" id="dealsInProgress">0</div>
                    <div class="stat-label">Deals in Progress</div>
                </div>
            </div>
            
            <h3>Pipeline Stages</h3>
            <div class="pipeline">
                <div class="pipeline-stage">
                    <div class="pipeline-count" id="stageNew">0</div>
                    <div class="pipeline-label">New</div>
                </div>
                <div class="pipeline-stage">
                    <div class="pipeline-count" id="stageContacted">0</div>
                    <div class="pipeline-label">Contacted</div>
                </div>
                <div class="pipeline-stage">
                    <div class="pipeline-count" id="stageReplied">0</div>
                    <div class="pipeline-label">Replied</div>
                </div>
                <div class="pipeline-stage">
                    <div class="pipeline-count" id="stageMeeting">0</div>
                    <div class="pipeline-label">Meeting</div>
                </div>
                <div class="pipeline-stage">
                    <div class="pipeline-count" id="stageClosedWon">0</div>
                    <div class="pipeline-label">Closed Won</div>
                </div>
                <div class="pipeline-stage">
                    <div class="pipeline-count" id="stageClosedLost">0</div>
                    <div class="pipeline-label">Closed Lost</div>
                </div>
            </div>
            
            <button onclick="loadAnalytics()">Refresh Dashboard</button>
        </section>
        </div>
        </div>

        <div id="page-leads" class="page">
        <div id="csvImportProgress" class="csv-import-progress" style="display:none;">
            <div class="csv-progress-inner">
                <div class="csv-progress-text">
                    <span id="csvProgressLabel">Scoring...</span>
                    <span id="csvProgressCount">0/0 complete</span>
                </div>
                <div class="csv-progress-bar-track">
                    <div id="csvProgressBar" class="csv-progress-bar-fill" style="width:0%"></div>
                </div>
            </div>
        </div>
        <section class="card">
            <h2>Leads Table</h2>
            <div class="table-controls">
                <button onclick="enrichFromHunter()">Enrich via Hunter (if configured)</button>
                <button onclick="reScoreLeads()">Re-score All with AI</button>
                <button id="loadMoreBtn" onclick="loadMoreLeads()" style="display: none;">Load More Leads</button>
                <button onclick="exportCSV()">Download CSV</button>
                <button onclick="openCsvImportModal()" style="background: linear-gradient(135deg, #8b5cf6, #a78bfa); color: white; font-weight: 600;">Import CSV</button>
                <button onclick="loadLeads()">Refresh</button>
                <button id="emailSelectedBtn" onclick="emailSelectedLeads()" style="display: none;">Email Selected</button>
                <button id="smsSelectedBtn" onclick="smsSelectedLeads()" style="display: none;">SMS Selected</button>
            </div>
            <p style="font-size: 12px; color: #888; margin: 4px 0 0; line-height: 1.5;">&#128274; Your data stays private. We never share or sell your leads. <a href="/privacy" target="_blank" style="color: #a78bfa; text-decoration: underline; font-size: 12px;">Read our Privacy Policy</a></p>
            <div class="table-controls">
                <label style="margin-right: 10px;">
                    <input type="checkbox" id="needsEmailFilter" onchange="toggleNeedsEmailFilter()" />
                    Show only leads without email
                </label>
                <label style="margin-right: 10px;">
                    <select id="sourceFilter" onchange="toggleSourceFilter()" style="padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd; font-size: 12px;">
                        <option value="all">All Sources</option>
                        <option value="search">Searched Only</option>
                        <option value="import">Imported Only</option>
                    </select>
                </label>
                <span id="selectionInfo" style="margin-left: 20px; color: var(--primary); font-weight: 500; display: none;">
                    <span id="selectedCount">0</span> leads selected
                    <button onclick="clearLeadSelection()" style="margin-left: 8px; padding: 2px 8px; font-size: 12px; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer;">Clear</button>
                </span>
            </div>
            <div style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px; padding: 10px 16px; margin-bottom: 12px; color: #1e40af; font-size: 13px; display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 16px;">&#8505;&#65039;</span>
                <span>New leads may take a few minutes for some details (such as emails) to populate, as a background scrape runs for each lead.</span>
            </div>
            <div id="leadsStatus" class="status-text"></div>
            <div class="table-wrapper">
                <table id="leadsTable">
                    <thead>
                        <tr>
                            <th style="width: 40px; text-align: center;">
                                <input type="checkbox" id="selectAllLeads" onclick="toggleSelectAllLeads()" title="Select All" />
                            </th>
                            <th class="sortable" onclick="sortByColumn('name')">
                                Name <span id="sortName" class="sort-indicator"></span>
                            </th>
                            <th>Contact</th>
                            <th>Address</th>
                            <th>Phone</th>
                            <th>Website</th>
                            <th class="sortable" onclick="sortByColumn('email')">
                                Email <span id="sortEmail" class="sort-indicator"></span>
                            </th>
                            <th>Source</th>
                            <th class="sortable" onclick="sortByColumn('score')">
                                Score <span id="sortScore" class="sort-indicator"></span>
                            </th>
                            <th class="sortable" onclick="sortByColumn('website')" title="Website Quality (0-30): Current website quality and professionalism - higher score = better website">
                                Website <span id="sortWebsite" class="sort-indicator"></span>
                            </th>
                            <th class="sortable" onclick="sortByColumn('presence')" title="Digital Presence (0-30): Online reputation and visibility strength - higher score = stronger presence">
                                Presence <span id="sortPresence" class="sort-indicator"></span>
                            </th>
                            <th class="sortable" onclick="sortByColumn('automation')" title="Automation & Technology (0-40): Current automation and AI adoption level - higher score = more automated">
                                Automation <span id="sortAutomation" class="sort-indicator"></span>
                            </th>
                            <th>Tech</th>
                            <th class="sortable" onclick="sortByColumn('stage')">
                                Stage <span id="sortStage" class="sort-indicator"></span>
                            </th>
                            <th>Notes</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="leadsTableBody">
                        <tr><td colspan="16" class="no-data">No leads yet. Start by searching for businesses above.</td></tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Mobile Cards View (hidden on desktop) -->
            <div class="mobile-data-cards" id="leadsCards">
                <div class="mobile-data-card" style="text-align: center; color: #6b7280;">
                    No leads yet. Start by searching for businesses above.
                </div>
            </div>
        </section>
        </div>

        <div id="page-email" class="page">
        <section class="card">
            <h2>Email Composer</h2>
            <div class="email-composer">
                <div class="template-manager" style="background: rgba(139, 92, 246, 0.05); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid rgba(139, 92, 246, 0.2);">
                    <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                        <label style="margin: 0; font-weight: 600;">Saved Templates:</label>
                        <select id="templateSelect" onchange="loadSelectedTemplate()" style="flex: 1; min-width: 200px;">
                            <option value="">-- Select a template --</option>
                        </select>
                        <button onclick="saveCurrentTemplate()" class="btn-secondary" style="padding: 8px 12px; font-size: 13px;">Save As New</button>
                        <button onclick="deleteSelectedTemplate()" class="btn-danger" style="padding: 8px 12px; font-size: 13px; background: #fee2e2; color: #dc2626; border: none; border-radius: 6px; cursor: pointer;">Delete</button>
                    </div>
                    <div id="templateStatus" class="status-text" style="margin-top: 8px;"></div>
                </div>
                
                <label>Subject Template:</label>
                <input type="text" id="subjectTemplate" placeholder="{{business_name}} - Opportunity to enhance your digital presence" />
                
                <label>Body Template:</label>
                <textarea id="bodyTemplate" rows="6" placeholder="Hi {{business_name}},

I noticed your business in {{city}} and thought you might be interested in modern AI solutions to enhance your online presence.

Would you be open to a quick chat?

Best regards"></textarea>
                
                <div class="button-row">
                    <button onclick="previewEmails()">Preview First 5 Emails</button>
                </div>
                
                <div id="emailPreview"></div>
                
                <h3>AI Personalized Email</h3>
                <p class="info-text">üìå <strong>Click on any row in the Leads table</strong> to select a lead, then generate a personalized email.</p>
                <label>Your Pitch (one-time input):</label>
                <textarea id="basePitch" rows="3" placeholder="We help local businesses like yours leverage AI to increase customer engagement and automate routine tasks."></textarea>
                
                <div class="selected-lead-box">
                    <label>Selected Lead:</label>
                    <div id="selectedLeadDisplay" class="selected-lead-display" style="display: none;">No lead selected</div>
                    <input type="hidden" id="selectedLeadId" />
                    <p id="noLeadSelected" class="no-lead-hint">üëÜ Go to Leads tab and click on a row to select a lead</p>
                </div>
                
                <div class="button-row">
                    <button onclick="generatePersonalized()">Generate AI Email</button>
                    <button onclick="previewSelectedLeadEmail()" class="btn-secondary">Preview Email</button>
                    <button onclick="sendSelectedLeadEmail()" class="btn-primary">Send Email</button>
                </div>
                <div id="personalizedEmailPreview"></div>
                <div id="selectedEmailStatus" class="status-text"></div>
            </div>
        </section>

        <section class="card">
            <h2>Send Emails</h2>
            <div class="email-send-form">
                <p class="info-text">Using templates from above. Set filters to target specific leads.</p>
                
                <label>Minimum Score (optional):</label>
                <input type="number" id="minScore" placeholder="e.g., 60" min="0" max="100" />
                
                <label>Stage Filter (optional):</label>
                <select id="stageFilter">
                    <option value="">All Stages</option>
                    <option value="New">New</option>
                    <option value="Contacted">Contacted</option>
                    <option value="Replied">Replied</option>
                    <option value="Meeting">Meeting</option>
                </select>
                
                <div class="checkbox-row" style="margin: 16px 0;">
                    <label class="checkbox-label" style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="includeScoreReport" style="width: 18px; height: 18px; accent-color: #8b5cf6;">
                        <span><strong>Include Score Breakdown Report</strong> - Attach the full analysis report with strengths, weaknesses, and opportunities</span>
                    </label>
                </div>
                <div class="checkbox-row" style="margin: 16px 0;">
                    <label class="checkbox-label" style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="attachPdfReport" style="width: 18px; height: 18px; accent-color: #8b5cf6;">
                        <span><strong>Attach PDF Audit Report</strong> - Include a professional PDF report as an email attachment</span>
                    </label>
                </div>
                
                <button onclick="sendEmails()" class="btn-primary">Send Bulk Emails</button>
                <div id="sendStatus" class="status-text"></div>
            </div>
        </section>
        </div>

        <div id="page-sms" class="page">
        <section class="card">
            <h2>SMS Composer</h2>
            <p class="info-text">üí¨ For leads without email addresses, reach out via SMS. SMS requires Twilio configuration. Set up your Twilio credentials in <a href="#" onclick="showPage('settings'); return false;" style="color: #8b5cf6; font-weight: 600; text-decoration: underline;">Settings</a> to enable SMS campaigns.</p>
            <div class="sms-composer">
                <label>Message Template (160 characters max recommended):</label>
                <textarea id="smsTemplate" rows="4" maxlength="300" placeholder="Hi {{business_name}}! I noticed your business in {{city}} and thought you might be interested in AI solutions to enhance your online presence. Interested? Reply YES for more info."></textarea>
                <div class="char-count"><span id="smsCharCount">0</span>/300 characters</div>
                
                <div class="button-row">
                    <button onclick="previewSMS()">Preview First 5 SMS</button>
                </div>
                
                <div id="smsPreview"></div>
                
                <h3>Send SMS Campaign</h3>
                <label>Minimum Score (optional):</label>
                <input type="number" id="smsMinScore" placeholder="e.g., 60" min="0" max="100" />
                
                <label>Stage Filter (optional):</label>
                <select id="smsStageFilter">
                    <option value="">All Stages</option>
                    <option value="New">New</option>
                    <option value="Contacted">Contacted</option>
                    <option value="Replied">Replied</option>
                    <option value="Meeting">Meeting</option>
                </select>
                
                <button onclick="sendSMS()" class="btn-primary">Send Bulk SMS</button>
                <div id="smsStatus" class="status-text"></div>
            </div>
        </section>
        </div>

        <div id="page-scoring-guide" class="page">
        <section class="card">
            <h2>üéØ Understanding Lead Scores</h2>
            <p class="info-text">
                Our AI analyzes each business's website quality, online presence, and automation level to generate a score from 0-100. 
                Higher scores indicate stronger digital maturity. Lower scores represent greater opportunity for improvement.
            </p>
            
            <div style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); border-radius: 12px; padding: 20px; margin: 25px 0; border: 2px solid #a855f7; box-shadow: 0 4px 16px rgba(139, 92, 246, 0.3);">
                <div style="display: flex; align-items: start; gap: 14px;">
                    <div style="font-size: 32px; line-height: 1;">‚ö†Ô∏è</div>
                    <div style="flex: 1; color: white;">
                        <div style="font-weight: 700; font-size: 16px; margin-bottom: 10px;">IMPORTANT: Low Scores May Be False Negatives</div>
                        <div style="font-size: 14px; line-height: 1.6; opacity: 0.95;">
                            <p style="margin-bottom: 10px;"><strong>Always manually review websites that score low (0-40)</strong> before dismissing them as opportunities. Low scores can occur for several reasons:</p>
                            <ul style="margin-left: 20px; margin-bottom: 10px;">
                                <li style="margin-bottom: 8px;"><strong>üõ°Ô∏è Advanced Security Detected:</strong> Websites with enterprise-grade bot protection (Cloudflare, Akamai) block our automated analysis. This is actually a <em>sign of sophistication</em> - indicating a well-funded organization with professional IT infrastructure.</li>
                                <li style="margin-bottom: 8px;"><strong>‚ö° Modern JavaScript Frameworks:</strong> Sites built with React, Next.js, Vue, or Angular may render content dynamically, which can be challenging for automated tools to fully capture.</li>
                                <li style="margin-bottom: 8px;"><strong>üé≠ Complex Interactive Features:</strong> Advanced functionality like real-time dashboards, interactive calculators, or custom web applications may not be fully assessed automatically.</li>
                            </ul>
                            <p style="margin-top: 12px; padding: 12px; background: rgba(255, 255, 255, 0.15); border-radius: 6px; font-weight: 600;">
                                <strong>üí° Best Practice:</strong> When you see a score of 0 with a "üõ°Ô∏è ADVANCED SECURITY DETECTED" banner in the breakdown, this often indicates a sophisticated, well-funded company - not a poor website. These organizations may not need basic web services but could be interested in premium, enterprise-level solutions.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="scoring-guide">
                <div class="score-card">
                    <div class="score-badge score-excellent">90</div>
                    <h3>Excellent (80-100)</h3>
                    <p><strong>What it means:</strong> This business has a strong digital presence with a modern website, excellent online reputation, and good automation already in place.</p>
                    <p><strong>Strategy:</strong> These are well-optimized businesses. Focus on advanced solutions or niche improvements rather than basics. They likely have budget for premium services.</p>
                    <p><strong>Examples:</strong> Large companies with professional websites, 50+ reviews (4.5+ stars), chatbots, and automated booking systems.</p>
                </div>

                <div class="score-card">
                    <div class="score-badge score-high">75</div>
                    <h3>Good (50-79)</h3>
                    <p><strong>What it means:</strong> The business has a decent digital foundation but there's clear room for improvement. They understand the value of online presence.</p>
                    <p><strong>Strategy:</strong> <strong>Great opportunity!</strong> They're past the basics but need the next level. Offer specific upgrades: better mobile experience, AI chatbots, automation, or reputation management.</p>
                    <p><strong>Examples:</strong> Businesses with functional websites, 10-50 reviews, some online presence but missing modern features like automation or AI tools.</p>
                </div>

                <div class="score-card">
                    <div class="score-badge score-medium">50</div>
                    <h3>Needs Improvement (30-49)</h3>
                    <p><strong>What it means:</strong> Significant gaps in their digital presence. They may have an outdated website, very few reviews, or no automation at all.</p>
                    <p><strong>Strategy:</strong> <strong>High potential!</strong> These businesses need foundational improvements. Start with basics: website modernization, SSL, mobile responsiveness, reputation building.</p>
                    <p><strong>Examples:</strong> Businesses with old websites (no SSL, not mobile-friendly), fewer than 10 reviews, no online booking or automation.</p>
                </div>

                <div class="score-card">
                    <div class="score-badge score-low">25</div>
                    <h3>Critical (0-29)</h3>
                    <p><strong>What it means:</strong> Minimal to no digital presence. May have a broken website, no website at all, or virtually no online reviews.</p>
                    <p><strong>Strategy:</strong> <strong>Biggest opportunity!</strong> These businesses are operating offline or with severely outdated tech. Lead with education about digital transformation and ROI.</p>
                    <p><strong>Examples:</strong> Businesses with no website, broken websites, zero reviews, or relying entirely on word-of-mouth and physical foot traffic.</p>
                </div>
            </div>

            <div class="scoring-factors">
                <h3>What the AI Looks At</h3>
                <ul>
                    <li><strong>Website Quality (30 points):</strong> Modern design, mobile-responsive, SSL/HTTPS, fast loading, good UX</li>
                    <li><strong>Digital Presence (30 points):</strong> Number of Google reviews, average rating, online visibility</li>
                    <li><strong>Automation & Technology (40 points):</strong> AI chatbots, automated booking, lead capture systems, workflow automation</li>
                </ul>
            </div>

            <div class="scoring-tip">
                <strong>üí° Pro Tip:</strong> Lower scores (0-49) represent the biggest opportunity for transformation - these businesses need the most help and can benefit dramatically from your services. Higher scores (80+) may only need advanced or niche solutions.
            </div>
        </section>
        </div>

        <div id="page-settings" class="page">
        <section class="card">
            <h2>‚öôÔ∏è Settings</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                <div onclick="document.getElementById('apiConfigSection').scrollIntoView({behavior: 'smooth'})" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.15) 100%); padding: 30px; border-radius: 12px; border: 2px solid rgba(139, 92, 246, 0.3); cursor: pointer; transition: all 0.3s ease;">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">üîß</div>
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 1.2rem; margin-bottom: 8px;">API Configuration</div>
                    <div style="color: #b0b0b0; font-size: 0.9rem;">Configure your API keys for third-party integrations</div>
                </div>
                
                <div onclick="logout()" style="background: linear-gradient(135deg, rgba(245, 87, 108, 0.15) 0%, rgba(240, 147, 251, 0.15) 100%); padding: 30px; border-radius: 12px; border: 2px solid rgba(245, 87, 108, 0.3); cursor: pointer; transition: all 0.3s ease;">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">üö™</div>
                    <div style="font-weight: 600; color: #f5576c; font-size: 1.2rem; margin-bottom: 8px;">Logout</div>
                    <div style="color: #b0b0b0; font-size: 0.9rem;">Logged in as: <strong id="settingsUserEmail" style="color: #a78bfa;">Loading...</strong></div>
                </div>
            </div>
            
            <div id="apiConfigSection"></div>
            <div id="settingsStatus" class="status-text"></div>
            
            <div class="settings-form">
                <h3>‚úçÔ∏è Email Signature</h3>
                <p class="info-text">Configure your email signature to automatically appear at the end of your outreach emails.</p>
                
                <div id="signatureStatus" class="status-text" style="margin-bottom: 15px;"></div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>Your Full Name</label>
                        <input type="text" id="sigFullName" placeholder="John Smith">
                    </div>
                    <div class="form-group">
                        <label>Position / Title</label>
                        <input type="text" id="sigPosition" placeholder="Founder & CEO">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>Company Name</label>
                        <input type="text" id="sigCompanyName" placeholder="AI Solutions Ltd">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="text" id="sigPhone" placeholder="+1 (555) 123-4567">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>Website URL</label>
                        <input type="text" id="sigWebsite" placeholder="https://www.yourcompany.com">
                    </div>
                    <div class="form-group">
                        <label>Company Logo (optional)</label>
                        <div id="logoUploadArea" onclick="document.getElementById('sigLogoFile').click()" style="border: 2px dashed #d1d5db; border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; background: #fafafa; transition: all 0.2s;">
                            <div id="logoPreviewContainer" style="display: none;">
                                <img id="logoPreviewImg" src="" alt="Logo preview" style="max-height: 60px; max-width: 200px; margin-bottom: 10px;">
                                <div style="font-size: 12px; color: #6b7280;">Click to change logo</div>
                            </div>
                            <div id="logoPlaceholder">
                                <div style="font-size: 24px; margin-bottom: 8px;">üì∑</div>
                                <div style="color: #6b7280; font-size: 14px;">Click to upload your logo</div>
                                <div style="color: #9ca3af; font-size: 12px; margin-top: 4px;">PNG, JPG up to 2MB</div>
                            </div>
                        </div>
                        <input type="file" id="sigLogoFile" accept="image/png,image/jpeg,image/gif,image/webp" style="display: none;" onchange="handleLogoUpload(event)">
                        <input type="hidden" id="sigLogoUrl" value="">
                        <button type="button" id="removeLogoBtn" onclick="removeLogo()" style="display: none; margin-top: 8px; background: #fee2e2; color: #dc2626; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">Remove Logo</button>
                    </div>
                </div>
                
                <div class="form-group" style="margin-bottom: 20px;">
                    <label>Disclaimer / Legal Text (optional)</label>
                    <textarea id="sigDisclaimer" rows="2" placeholder="This email is confidential and intended solely for the use of the individual to whom it is addressed."></textarea>
                </div>
                
                <div style="background: rgba(139, 92, 246, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <label class="checkbox-label" style="display: flex; align-items: center; gap: 10px; cursor: pointer; margin-bottom: 15px;">
                        <input type="checkbox" id="sigUseCustom" onchange="toggleCustomSignature()" style="width: 18px; height: 18px; accent-color: #8b5cf6;">
                        <span><strong>Use Custom Signature</strong> - Write your own signature instead of using the fields above</span>
                    </label>
                    
                    <div id="customSignatureSection" style="display: none;">
                        <label>Custom Signature (plain text or HTML)</label>
                        <textarea id="sigCustom" rows="6" placeholder="Best regards,
John Smith
Founder & CEO, AI Solutions Ltd
Phone: +1 (555) 123-4567
www.yourcompany.com"></textarea>
                    </div>
                </div>
                
                <div style="background: rgba(255, 255, 255, 0.03); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <label style="font-weight: 600; margin-bottom: 10px; display: block;">Signature Preview:</label>
                    <div id="signaturePreview" style="background: white; color: #333; padding: 15px; border-radius: 6px; font-family: Arial, sans-serif; font-size: 14px;">
                        <em style="color: #999;">Fill in the fields above to see your signature preview</em>
                    </div>
                </div>
                
                <button onclick="saveEmailSignature()" class="btn-primary">Save Email Signature</button>
                
                <hr style="margin: 30px 0; border: none; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                
                <h3>üîê OAuth Setup (One-Time Configuration)</h3>
                <p class="info-text">Configure OAuth credentials for email providers. This is a one-time setup that allows all users to connect their Gmail/Outlook accounts.</p>
                
                <div id="oauthStatus" class="status-text" style="margin-bottom: 15px;"></div>
                
                <div style="background: rgba(139, 92, 246, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; gap: 20px; margin-bottom: 10px;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: #8b5cf6;">Gmail OAuth</div>
                            <div style="font-size: 0.85rem; color: #b0b0b0;" id="gmailOAuthStatus">Not configured</div>
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: #3b82f6;">Outlook OAuth</div>
                            <div style="font-size: 0.85rem; color: #b0b0b0;" id="outlookOAuthStatus">Not configured</div>
                        </div>
                    </div>
                    <button onclick="toggleOAuthConfig()" class="btn-primary" style="width: 100%; margin-top: 10px;">
                        Configure OAuth Settings
                    </button>
                </div>
                
                <div id="oauthConfigSection" style="display: none; background: rgba(255, 255, 255, 0.03); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                    <h4>Gmail OAuth Configuration</h4>
                    <div style="background: rgba(255, 193, 7, 0.1); padding: 12px; border-radius: 6px; margin-bottom: 15px; font-size: 0.9rem;">
                        <strong>üìö Setup Guide:</strong> Follow the instructions in <code>GMAIL_OAUTH_SETUP.md</code> to create OAuth credentials in Google Cloud Console.
                    </div>
                    
                    <div class="form-group">
                        <label>Gmail Client ID</label>
                        <input type="text" id="gmailClientId" placeholder="1234567890-abc...apps.googleusercontent.com">
                    </div>
                    <div class="form-group">
                        <label>Gmail Client Secret</label>
                        <input type="password" id="gmailClientSecret" placeholder="GOCSPX-..." autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Gmail Redirect URI</label>
                        <input type="text" id="gmailRedirectUri" placeholder="https://your-domain.com/api/email/auth/gmail/callback">
                        <small style="color: #b0b0b0;">Use your deployment URL + /api/email/auth/gmail/callback</small>
                    </div>
                    <button onclick="saveGmailOAuth()" class="btn-primary">Save Gmail OAuth</button>
                    
                    <hr style="margin: 25px 0; border: none; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    
                    <h4>Outlook OAuth Configuration</h4>
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 12px; border-radius: 6px; margin-bottom: 15px; font-size: 0.9rem;">
                        <strong>üìö Setup Guide:</strong> Create an app in Azure AD Portal and configure OAuth credentials.
                    </div>
                    
                    <div class="form-group">
                        <label>Outlook Client ID</label>
                        <input type="text" id="outlookClientId" placeholder="12345678-1234-1234-1234-123456789012">
                    </div>
                    <div class="form-group">
                        <label>Outlook Client Secret</label>
                        <input type="password" id="outlookClientSecret" placeholder="abc..." autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Outlook Redirect URI</label>
                        <input type="text" id="outlookRedirectUri" placeholder="https://your-domain.com/api/email/auth/outlook/callback">
                        <small style="color: #b0b0b0;">Use your deployment URL + /api/email/auth/outlook/callback</small>
                    </div>
                    <button onclick="saveOutlookOAuth()" class="btn-primary">Save Outlook OAuth</button>
                </div>
                
                <h3>üìß Email Sending Provider</h3>
                <p class="info-text">Choose how you want to send emails to your leads. Connect your preferred email provider for reliable delivery.</p>
                
                <div id="emailProviderStatus" class="email-provider-status" style="padding: 15px; background: rgba(139, 92, 246, 0.08); border: 1px solid rgba(139, 92, 246, 0.15); border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <span id="emailStatusIcon" style="font-size: 1.5rem;">‚ö™</span>
                        <div>
                            <div style="font-weight: 600; color: #1f2937;" id="emailProviderName">No provider connected</div>
                            <div style="font-size: 0.85rem; color: #6b7280;" id="emailProviderEmail"></div>
                        </div>
                    </div>
                </div>
                
                <div class="provider-selector" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                    <div class="provider-card" onclick="selectEmailProvider('gmail')" style="cursor: pointer; padding: 20px; background: #ffffff; border: 2px solid #e5e7eb; border-radius: 10px; text-align: center; transition: all 0.3s ease;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üìÆ</div>
                        <div style="font-weight: 600; margin-bottom: 5px; color: #1f2937;">Gmail</div>
                        <div style="font-size: 0.8rem; color: #6b7280;">OAuth 2.0</div>
                    </div>
                    
                    <div class="provider-card" onclick="selectEmailProvider('outlook')" style="cursor: pointer; padding: 20px; background: #ffffff; border: 2px solid #e5e7eb; border-radius: 10px; text-align: center; transition: all 0.3s ease;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üì®</div>
                        <div style="font-weight: 600; margin-bottom: 5px; color: #1f2937;">Outlook</div>
                        <div style="font-size: 0.8rem; color: #6b7280;">Microsoft OAuth</div>
                    </div>
                    
                    <div class="provider-card" onclick="selectEmailProvider('smtp')" style="cursor: pointer; padding: 20px; background: #ffffff; border: 2px solid #e5e7eb; border-radius: 10px; text-align: center; transition: all 0.3s ease;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üîß</div>
                        <div style="font-weight: 600; margin-bottom: 5px; color: #1f2937;">SMTP</div>
                        <div style="font-size: 0.8rem; color: #6b7280;">Custom Server</div>
                    </div>
                    
                    <div class="provider-card" onclick="selectEmailProvider('sendgrid')" style="cursor: pointer; padding: 20px; background: #ffffff; border: 2px solid #e5e7eb; border-radius: 10px; text-align: center; transition: all 0.3s ease;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üì¨</div>
                        <div style="font-weight: 600; margin-bottom: 5px; color: #1f2937;">SendGrid</div>
                        <div style="font-size: 0.8rem; color: #6b7280;">API-based</div>
                    </div>
                </div>
                
                <div id="gmailConfig" class="provider-config" style="display: none; padding: 20px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #8b5cf6; margin-bottom: 15px;">Connect Gmail Account</h4>
                    <p class="info-text">Authenticate with your Gmail account to send emails directly. This uses OAuth 2.0 for secure access.</p>
                    <button onclick="connectGmail()" class="btn-primary" style="margin-top: 10px;">
                        <span style="margin-right: 8px;">üîê</span> Connect Gmail
                    </button>
                    <div class="info-text" style="margin-top: 15px; padding: 10px; background: rgba(255, 193, 7, 0.1); border-radius: 6px; font-size: 0.85rem;">
                        <strong>Note:</strong> Your Gmail account will only be used to send emails on your behalf. Each user authenticates with their own account.
                    </div>
                </div>
                
                <div id="outlookConfig" class="provider-config" style="display: none; padding: 20px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #8b5cf6; margin-bottom: 15px;">Connect Outlook Account</h4>
                    <p class="info-text">Authenticate with your Microsoft/Outlook account to send emails. This uses Microsoft OAuth for secure access.</p>
                    <button onclick="connectOutlook()" class="btn-primary" style="margin-top: 10px;">
                        <span style="margin-right: 8px;">üîê</span> Connect Outlook
                    </button>
                    <div class="info-text" style="margin-top: 15px; padding: 10px; background: rgba(255, 193, 7, 0.1); border-radius: 6px; font-size: 0.85rem;">
                        <strong>Note:</strong> Your Outlook/Microsoft account will only be used to send emails on your behalf. Each user authenticates with their own account.
                    </div>
                </div>
                
                <div id="smtpConfig" class="provider-config" style="display: none; padding: 20px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #8b5cf6; margin-bottom: 15px;">SMTP Server Configuration</h4>
                    <p class="info-text">Configure a custom SMTP server (Gmail, Yahoo, custom domain, etc.)</p>
                    
                    <label>SMTP Host:</label>
                    <input type="text" id="smtpHost" placeholder="smtp.gmail.com" />
                    
                    <label>SMTP Port:</label>
                    <input type="number" id="smtpPort" placeholder="587" value="587" />
                    
                    <label>Username (Email):</label>
                    <input type="email" id="smtpUsername" placeholder="your-email@example.com" />
                    
                    <label>Password or App Password:</label>
                    <input type="password" id="smtpPassword" placeholder="Your password or app-specific password" autocomplete="off" />
                    
                    <label>From Email Address:</label>
                    <input type="email" id="smtpFromEmail" placeholder="your-email@example.com" />
                    
                    <label style="display: flex; align-items: center; gap: 8px; margin-top: 15px;">
                        <input type="checkbox" id="smtpUseTls" checked />
                        <span>Use TLS/STARTTLS (Recommended)</span>
                    </label>
                    
                    <button onclick="saveSmtpSettings()" class="btn-primary" style="margin-top: 15px;">
                        <span style="margin-right: 8px;">üíæ</span> Save SMTP Settings
                    </button>
                </div>
                
                <div id="sendgridConfig" class="provider-config" style="display: none; padding: 20px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #8b5cf6; margin-bottom: 15px;">SendGrid Configuration</h4>
                    <p class="info-text" style="margin-bottom: 15px;">Enter your SendGrid API key and verified sender email address.</p>
                    
                    <label style="display: block; margin-bottom: 5px; color: #4b5563;">SendGrid API Key:</label>
                    <input type="password" id="sendgridApiKeyConfig" placeholder="SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" style="width: 100%; padding: 10px; margin-bottom: 15px;" autocomplete="off" />
                    
                    <label style="display: block; margin-bottom: 5px; color: #4b5563;">From Email (must be verified in SendGrid):</label>
                    <input type="email" id="sendgridFromEmailConfig" placeholder="your-email@example.com" style="width: 100%; padding: 10px; margin-bottom: 15px;" />
                    
                    <button onclick="saveSendgridSettings()" class="btn-primary" style="margin-top: 15px;">
                        <span style="margin-right: 8px;">üíæ</span> Save SendGrid Settings
                    </button>
                </div>
                
                <div class="email-provider-actions" style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
                    <button onclick="sendTestEmail()" style="background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);">
                        <span style="margin-right: 8px;">üìß</span> Send Test Email
                    </button>
                    <button onclick="disconnectEmailProvider()" id="disconnectEmailBtn" style="display: none; background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);">
                        <span style="margin-right: 8px;">üîå</span> Disconnect Provider
                    </button>
                </div>
                
                <hr style="margin: 30px 0; border: none; border-top: 1px solid rgba(255, 255, 255, 0.1);" />
                
                <h3>Twilio Configuration (SMS)</h3>
                <label>Twilio Account SID:</label>
                <input type="text" id="twilioAccountSid" placeholder="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
                
                <label>Twilio Auth Token:</label>
                <input type="password" id="twilioAuthToken" placeholder="Your Twilio Auth Token" autocomplete="off" />
                
                <label>Twilio Phone Number:</label>
                <input type="text" id="twilioPhoneNumber" placeholder="+1234567890" />
                
                <h3>Hunter.io Configuration</h3>
                <label>Hunter.io API Key:</label>
                <input type="password" id="hunterApiKey" placeholder="Your Hunter.io API Key" autocomplete="off" />
                
                <p class="info-text" style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.1); border-left: 3px solid #8b5cf6; border-radius: 5px;">
                    <strong>üìß SendGrid Configuration:</strong> SendGrid is now configured through the Email Provider section above. Select SendGrid as your provider and enter your credentials there.
                </p>
                
                <button onclick="saveUserSettings()" class="btn-primary" style="margin-top: 20px;">Save Settings</button>
            </div>
        </section>
        </div>

        <div id="page-admin" class="page">
        <section class="card">
            <h2>üîê Admin Dashboard</h2>
            <p style="color: #6b7280; margin-bottom: 20px;">Manage users and their credit balances.</p>
            
            <div id="adminStatus" class="status-text"></div>
            
            <div style="overflow-x: auto;">
                <table class="leads-table" id="adminUsersTable">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Name</th>
                            <th>Credits</th>
                            <th>Admin</th>
                            <th>Registered</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminUsersBody">
                        <tr><td colspan="6" style="text-align: center; color: #6b7280;">Loading users...</td></tr>
                    </tbody>
                </table>
            </div>
            
        </section>
        </div>

        <div id="page-help" class="page">
        <section class="card">
            <h2>üìö Help Center</h2>
            <p style="color: #6b7280; margin-bottom: 30px;">Get started with LeadBlitz and learn how to make the most of your lead generation.</p>
            
            <div class="help-sections">
                <!-- Quick Start Guide -->
                <div class="help-section" style="margin-bottom: 30px;">
                    <h3 style="color: #7C3AED; margin-bottom: 15px;">üöÄ Quick Start Guide</h3>
                    <div style="background: #f8f5ff; padding: 20px; border-radius: 10px; border-left: 4px solid #7C3AED;">
                        <ol style="margin: 0; padding-left: 20px; line-height: 2;">
                            <li><strong>Create a Campaign:</strong> Go to Leads and enter a search like "plumbers in London" to find businesses</li>
                            <li><strong>Review Your Leads:</strong> Click on any lead to see details, or use checkboxes to select multiple</li>
                            <li><strong>Score Leads:</strong> Click "Score with AI" to analyze websites and identify opportunities</li>
                            <li><strong>Send Outreach:</strong> Go to Email or SMS to contact your leads with personalized messages</li>
                            <li><strong>Track Progress:</strong> Use the CRM pipeline to manage your sales process</li>
                        </ol>
                    </div>
                </div>

                <!-- Credit System -->
                <div class="help-section" style="margin-bottom: 30px;">
                    <h3 style="color: #7C3AED; margin-bottom: 15px;">‚ö° Understanding Credits</h3>
                    <div style="background: #fafafa; padding: 20px; border-radius: 10px; border: 1px solid #e5e7eb;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid #e5e7eb;">
                                    <th style="text-align: left; padding: 10px; color: #374151;">Action</th>
                                    <th style="text-align: center; padding: 10px; color: #374151;">Cost</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 10px;">Lead Search (per lead found)</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #dbeafe; color: #1d4ed8; padding: 2px 8px; border-radius: 4px;">1 credit</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 10px;">AI Lead Scoring (per lead)</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #dbeafe; color: #1d4ed8; padding: 2px 8px; border-radius: 4px;">1 credit</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 10px;">AI Email Personalization</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #dbeafe; color: #1d4ed8; padding: 2px 8px; border-radius: 4px;">1 credit</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 10px;">Hunter.io Email Lookup (uses your API key)</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #d1fae5; color: #059669; padding: 2px 8px; border-radius: 4px;">FREE</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 10px;">SMS Message (per message)</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #fef3c7; color: #b45309; padding: 2px 8px; border-radius: 4px;">2 credits</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 10px;">Email Sending</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #d1fae5; color: #059669; padding: 2px 8px; border-radius: 4px;">FREE</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px;">Website Email Extraction</td>
                                    <td style="text-align: center; padding: 10px;"><span style="background: #d1fae5; color: #059669; padding: 2px 8px; border-radius: 4px;">FREE</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Subscription Plans -->
                <div class="help-section" style="margin-bottom: 30px;">
                    <h3 style="color: #7C3AED; margin-bottom: 15px;">üí≥ Subscription Plans</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div style="background: #fafafa; padding: 20px; border-radius: 10px; border: 1px solid #e5e7eb; text-align: center;">
                            <h4 style="color: #374151; margin-bottom: 10px;">Starter</h4>
                            <div style="font-size: 24px; font-weight: bold; color: #7C3AED;">$15<span style="font-size: 14px; color: #6b7280;">/month</span></div>
                            <p style="color: #6b7280; margin-top: 10px;">Up to 250 credits</p>
                        </div>
                        <div style="background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%); padding: 20px; border-radius: 10px; border: 2px solid #7C3AED; text-align: center;">
                            <h4 style="color: #374151; margin-bottom: 10px;">Professional</h4>
                            <div style="font-size: 24px; font-weight: bold; color: #7C3AED;">$59<span style="font-size: 14px; color: #6b7280;">/month</span></div>
                            <p style="color: #6b7280; margin-top: 10px;">Up to 1,000 credits</p>
                            <span style="background: #7C3AED; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">POPULAR</span>
                        </div>
                        <div style="background: #fafafa; padding: 20px; border-radius: 10px; border: 1px solid #e5e7eb; text-align: center;">
                            <h4 style="color: #374151; margin-bottom: 10px;">Pro Team</h4>
                            <div style="font-size: 24px; font-weight: bold; color: #7C3AED;">$199<span style="font-size: 14px; color: #6b7280;">/month</span></div>
                            <p style="color: #6b7280; margin-top: 10px;">Up to 5,000 credits</p>
                        </div>
                    </div>
                    <p style="color: #6b7280; margin-top: 15px; font-size: 14px;">Credits are issued in weekly batches: 25% immediately, then 25% at days 7, 14, and 21.</p>
                </div>

                <!-- FAQ -->
                <div class="help-section" style="margin-bottom: 30px;">
                    <h3 style="color: #7C3AED; margin-bottom: 15px;">‚ùì Frequently Asked Questions</h3>
                    <div style="background: #fafafa; padding: 20px; border-radius: 10px; border: 1px solid #e5e7eb;">
                        <details style="margin-bottom: 15px;">
                            <summary style="cursor: pointer; font-weight: 600; color: #374151; padding: 10px 0;">How does AI scoring work?</summary>
                            <p style="color: #6b7280; padding: 10px 0 0 20px;">Our AI analyzes business websites for mobile-friendliness, SSL security, SEO quality, content, and visual design. It generates a score from 0-100 and identifies specific opportunities for improvement.</p>
                        </details>
                        <details style="margin-bottom: 15px;">
                            <summary style="cursor: pointer; font-weight: 600; color: #374151; padding: 10px 0;">Why do some leads show "Bot Protected"?</summary>
                            <p style="color: #6b7280; padding: 10px 0 0 20px;">Some websites use advanced security that blocks automated analysis. This actually indicates a well-funded organization with professional IT infrastructure - often a great prospect!</p>
                        </details>
                        <details style="margin-bottom: 15px;">
                            <summary style="cursor: pointer; font-weight: 600; color: #374151; padding: 10px 0;">Can I cancel my subscription anytime?</summary>
                            <p style="color: #6b7280; padding: 10px 0 0 20px;">Yes, you can cancel anytime. Your subscription will remain active until the end of your current billing period, and you'll keep any unused credits.</p>
                        </details>
                        <details style="margin-bottom: 15px;">
                            <summary style="cursor: pointer; font-weight: 600; color: #374151; padding: 10px 0;">How do I connect my email?</summary>
                            <div style="color: #6b7280; padding: 10px 0 0 20px;">
                                <p style="margin-bottom: 15px;">Go to Settings and choose your email provider. Here's how to set up each option:</p>
                                
                                <h5 style="color: #374151; margin: 15px 0 10px 0;">Gmail OAuth Setup</h5>
                                <ol style="margin: 0 0 15px 0; padding-left: 20px; line-height: 1.8;">
                                    <li>Go to <a href="https://console.developers.google.com/" target="_blank" style="color: #7C3AED;">Google Developer Console</a></li>
                                    <li>Click project dropdown ‚Üí "New Project" ‚Üí Name and create it</li>
                                    <li>Under "Library," search "Gmail API" and enable it</li>
                                    <li>Go to "OAuth consent screen" and fill in your app name</li>
                                    <li>Navigate to "Credentials" ‚Üí "Create Credentials" ‚Üí "OAuth client ID"</li>
                                    <li>Set type to "Web application"</li>
                                    <li>Add redirect URI: <code style="background: #e5e7eb; padding: 2px 6px; border-radius: 4px; font-size: 12px;">https://your-domain.com/api/email/auth/gmail/callback</code></li>
                                    <li>Save your Client ID and Client Secret, then enter them in LeadBlitz Settings</li>
                                </ol>

                                <h5 style="color: #374151; margin: 15px 0 10px 0;">Outlook OAuth Setup</h5>
                                <ol style="margin: 0 0 15px 0; padding-left: 20px; line-height: 1.8;">
                                    <li>Visit <a href="https://entra.microsoft.com" target="_blank" style="color: #7C3AED;">Microsoft Entra Admin Center</a></li>
                                    <li>Go to "Azure AD" ‚Üí "App registrations" ‚Üí "New registration"</li>
                                    <li>Under "API permissions," add Mail.Read, Mail.Send, User.Read</li>
                                    <li>Grant admin consent for these permissions</li>
                                    <li>Copy your Application (client) ID and add redirect URI</li>
                                </ol>

                                <p style="background: #f8f5ff; padding: 10px; border-radius: 6px; border-left: 3px solid #7C3AED; margin-top: 10px;">
                                    <strong>Tip:</strong> Make sure redirect URIs match exactly between your provider and LeadBlitz settings.
                                </p>
                            </div>
                        </details>
                        <details>
                            <summary style="cursor: pointer; font-weight: 600; color: #374151; padding: 10px 0;">What data sources do you use?</summary>
                            <p style="color: #6b7280; padding: 10px 0 0 20px;">LeadBlitz uses only official APIs (Google Places, Hunter.io) and publicly available business information. We never scrape or use unofficial data sources.</p>
                        </details>
                    </div>
                </div>

                <!-- Support -->
                <div class="help-section">
                    <h3 style="color: #7C3AED; margin-bottom: 15px;">üí¨ Need More Help?</h3>
                    <div style="background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%); padding: 20px; border-radius: 10px; border: 1px solid #ddd6fe;">
                        <p style="color: #374151; margin-bottom: 10px;">Contact us at <a href="mailto:support@shapplications.com" style="color: #7C3AED; font-weight: 600;">support@shapplications.com</a></p>
                        <p style="color: #6b7280; font-size: 14px;">We typically respond within 24 hours on business days.</p>
                    </div>
                </div>
            </div>
        </section>
        </div>

    </div>

    <div id="authModal" class="auth-modal" style="display: none;">
        <div class="auth-modal-content">
            <span class="auth-close" onclick="closeAuthModal()" title="Back to home">&times;</span>
            <div class="auth-header">
                <h2>Welcome to <span style="color: #7C3AED;">Lead</span><span style="color: #F97316;">Blitz</span></h2>
                <p class="subtitle">Sign in to access your lead generation dashboard</p>
            </div>
            
            <div id="loginForm" class="auth-form">
                <h3>Login</h3>
                <div id="loginError" class="auth-error"></div>
                
                <form action="#" method="post" onsubmit="login(); return false;" autocomplete="on">
                    <label>Email:</label>
                    <input type="email" id="loginEmail" name="email" placeholder="your-email@example.com" autocomplete="email" />
                    
                    <label>Password:</label>
                    <input type="password" id="loginPassword" name="password" placeholder="Your password" autocomplete="current-password" />
                    
                    <button type="submit" class="auth-btn">Login</button>
                </form>
                
                <p class="auth-switch">
                    <a href="#" onclick="showForgotPassword(); return false;">Forgot your password?</a>
                </p>
                <p class="auth-switch">
                    Don't have an account? 
                    <a href="#" onclick="showRegister(); return false;">Register here</a>
                </p>
            </div>
            
            <div id="forgotPasswordForm" class="auth-form" style="display: none;">
                <h3>Reset Password</h3>
                <div id="forgotPasswordError" class="auth-error"></div>
                <div id="forgotPasswordSuccess" class="auth-success" style="display: none;"></div>
                
                <p style="color: #666; font-size: 14px; margin-bottom: 16px;">Enter your email address and we'll send you a link to reset your password.</p>
                
                <form action="#" method="post" onsubmit="requestPasswordReset(); return false;" autocomplete="on">
                    <label>Email:</label>
                    <input type="email" id="forgotEmail" name="email" placeholder="your-email@example.com" autocomplete="email" />
                    
                    <button type="submit" class="auth-btn">Send Reset Link</button>
                </form>
                
                <p class="auth-switch">
                    <a href="#" onclick="showLogin(); return false;">Back to Login</a>
                </p>
            </div>
            
            <div id="resetPasswordForm" class="auth-form" style="display: none;">
                <h3>Set New Password</h3>
                <div id="resetPasswordError" class="auth-error"></div>
                <div id="resetPasswordSuccess" class="auth-success" style="display: none;"></div>
                
                <form action="#" method="post" onsubmit="resetPassword(); return false;" autocomplete="on">
                    <input type="text" name="username" autocomplete="username" style="display: none;" aria-hidden="true" tabindex="-1" />
                    <label>New Password:</label>
                    <input type="password" id="newPassword" name="new-password" placeholder="At least 6 characters" autocomplete="new-password" />
                    
                    <label>Confirm Password:</label>
                    <input type="password" id="confirmPassword" name="confirm-password" placeholder="Confirm your password" autocomplete="new-password" />
                    
                    <button type="submit" class="auth-btn">Reset Password</button>
                </form>
                
                <p class="auth-switch">
                    <a href="#" onclick="showLogin(); return false;">Back to Login</a>
                </p>
            </div>
            
            <div id="registerForm" class="auth-form" style="display: none;">
                <h3>Register</h3>
                <div id="registerError" class="auth-error"></div>
                
                <form action="#" method="post" onsubmit="register(); return false;" autocomplete="on">
                    <label>Full Name:</label>
                    <input type="text" id="registerName" name="name" placeholder="John Doe" autocomplete="name" />
                    
                    <label>Email:</label>
                    <input type="email" id="registerEmail" name="email" placeholder="your-email@example.com" autocomplete="email" />
                    
                    <label>Password:</label>
                    <input type="password" id="registerPassword" name="password" placeholder="Choose a strong password" autocomplete="new-password" />
                    
                    <div style="display: flex; align-items: flex-start; gap: 8px; margin: 12px 0 16px;">
                        <input type="checkbox" id="privacyAgree" style="margin-top: 3px; accent-color: #7C3AED; cursor: pointer; min-width: 16px;" required />
                        <label for="privacyAgree" style="font-size: 13px; color: #aaa; cursor: pointer; line-height: 1.5;">I agree to the <a href="/terms" target="_blank" style="color: #a78bfa; text-decoration: underline;">Terms of Service</a> and <a href="/privacy" target="_blank" style="color: #a78bfa; text-decoration: underline;">Privacy Policy</a></label>
                    </div>
                    
                    <button type="submit" class="auth-btn">Register</button>
                </form>
                
                <p class="auth-switch">
                    Already have an account? 
                    <a href="#" onclick="showLogin(); return false;">Login here</a>
                </p>
            </div>
        </div>
    </div>

    <div id="missingKeysModal" class="auth-modal" style="display: none;">
        <div class="auth-modal-content">
            <div class="auth-header">
                <h2>API Keys Required</h2>
            </div>
            
            <div class="missing-keys-content">
                <p id="missingKeysMessage" style="color: #e0e0e0; margin-bottom: 25px; text-align: center; font-size: 1rem;"></p>
                
                <div style="display: flex; gap: 10px; flex-direction: column;">
                    <button onclick="goToSettings()" class="auth-btn" style="background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);">Go to Settings</button>
                    <button onclick="closeMissingKeysModal()" class="auth-btn" style="background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div id="tutorialModal" class="auth-modal" style="display: none;">
        <div class="tutorial-modal-content">
            <div class="tutorial-progress">
                <span id="tutorialProgressText">Step 1 of 5</span>
            </div>
            
            <div class="tutorial-steps">
                <div class="tutorial-step active" data-step="1">
                    <div class="tutorial-icon">üöÄ</div>
                    <h2>Welcome to <span style="color: #7C3AED;">Lead</span><span style="color: #F97316;">Blitz</span>!</h2>
                    <p>Your intelligent assistant for finding and converting high-quality business leads. This tool combines Google Places search with AI-powered analysis to help you identify the best opportunities.</p>
                    <div class="tutorial-features">
                        <div class="tutorial-feature">‚úì Search for businesses by type and location</div>
                        <div class="tutorial-feature">‚úì AI-powered lead scoring and analysis</div>
                        <div class="tutorial-feature">‚úì Automated email and SMS outreach</div>
                        <div class="tutorial-feature">‚úì Track your pipeline and conversions</div>
                    </div>
                </div>
                
                <div class="tutorial-step" data-step="2">
                    <div class="tutorial-icon">üîç</div>
                    <h2>Campaign Creation</h2>
                    <p>Start by searching for leads. Simply enter a business type (like "dentist" or "plumber"), location (like "Leeds, UK"), and your limit (up to 250 leads).</p>
                    <div class="tutorial-tip">
                        <strong>Pro Tip:</strong> The system automatically saves your searches as campaigns and caches results to avoid duplicate API calls. You can switch between campaigns anytime!
                    </div>
                    <div class="tutorial-steps-list">
                        <div>1. Click "New Search" in the navigation</div>
                        <div>2. Enter business type and location</div>
                        <div>3. Set your limit (max 250 per search)</div>
                        <div>4. Click Search to find leads</div>
                    </div>
                </div>
                
                <div class="tutorial-step" data-step="3">
                    <div class="tutorial-icon">ü§ñ</div>
                    <h2>AI Scoring</h2>
                    <p>Our AI analyzes each lead's website quality, digital presence, and automation level to calculate a score (0-100). Higher scores indicate stronger digital maturity.</p>
                    <div class="tutorial-scoring">
                        <div class="tutorial-score-item">
                            <span class="score-badge-demo score-excellent">80-100</span>
                            <span>Excellent - Strong digital presence</span>
                        </div>
                        <div class="tutorial-score-item">
                            <span class="score-badge-demo score-high">50-79</span>
                            <span>Good - Decent foundation</span>
                        </div>
                        <div class="tutorial-score-item">
                            <span class="score-badge-demo score-medium">30-49</span>
                            <span>Needs Improvement - High potential</span>
                        </div>
                        <div class="tutorial-score-item">
                            <span class="score-badge-demo score-low">0-29</span>
                            <span>Critical - Biggest opportunity</span>
                        </div>
                    </div>
                    <p style="margin-top: 20px; font-size: 0.95rem;">Lower scores represent leads that would benefit most from your services. Check the Scoring Guide for details on what factors we analyze.</p>
                </div>
                
                <div class="tutorial-step" data-step="4">
                    <div class="tutorial-icon">üìß</div>
                    <h2>Outreach</h2>
                    <p>Send personalized emails and SMS messages to your leads. Use template variables like {{business_name}} and {{city}} to customize each message.</p>
                    <div class="tutorial-features">
                        <div class="tutorial-feature"><strong>Email Features:</strong> Template-based or AI-generated personalized emails</div>
                        <div class="tutorial-feature"><strong>SMS Features:</strong> Quick text outreach with character counter</div>
                        <div class="tutorial-feature"><strong>Filtering:</strong> Target leads by score or pipeline stage</div>
                        <div class="tutorial-feature"><strong>Email Enrichment:</strong> Extract emails from websites or use Hunter.io</div>
                    </div>
                    <div class="tutorial-tip" style="margin-top: 15px;">
                        <strong>Remember:</strong> Always comply with GDPR, PECR, and CAN-SPAM regulations. Only contact businesses where you have legitimate interest.
                    </div>
                </div>
                
                <div class="tutorial-step" data-step="5">
                    <div class="tutorial-icon">‚öôÔ∏è</div>
                    <h2>Settings & API Keys</h2>
                    <p>For additional features, you can configure optional API keys in Settings:</p>
                    <div class="tutorial-api-keys">
                        <div class="tutorial-api-item">
                            <strong>SendGrid API</strong> (Optional)
                            <span>For sending email campaigns</span>
                        </div>
                        <div class="tutorial-api-item">
                            <strong>Twilio API</strong> (Optional)
                            <span>For sending SMS messages</span>
                        </div>
                        <div class="tutorial-api-item">
                            <strong>Hunter.io API</strong> (Optional)
                            <span>For email enrichment services</span>
                        </div>
                        <div class="tutorial-api-item">
                            <strong>Email Connections</strong>
                            <span>Add your email connections to send campaigns</span>
                        </div>
                        <div class="tutorial-api-item">
                            <strong>CSV Export</strong>
                            <span>You can export your leads as a CSV at any time to use your own email/SMS outreach tools</span>
                        </div>
                    </div>
                    <p style="margin-top: 20px; font-size: 0.95rem;">Visit the Settings page anytime to configure optional API keys for extra features!</p>
                </div>
            </div>
            
            <div class="tutorial-navigation">
                <a href="#" onclick="skipTutorial(); return false;" class="tutorial-skip">Skip Tutorial</a>
                <div class="tutorial-buttons">
                    <button id="tutorialPrevBtn" onclick="previousTutorialStep()" class="tutorial-btn tutorial-btn-secondary" disabled>Previous</button>
                    <button id="tutorialNextBtn" onclick="nextTutorialStep()" class="tutorial-btn tutorial-btn-primary">Next</button>
                </div>
            </div>
        </div>
    </div>

    <div id="campaignProgressModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <h2 style="margin-bottom: 20px;">Creating Campaign</h2>
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div class="progress-stages">
                    <div class="progress-stage" id="stage1">
                        <div class="stage-icon">üìç</div>
                        <div class="stage-text">Leads loading</div>
                    </div>
                    <div class="progress-stage" id="stage2">
                        <div class="stage-icon">‚úâÔ∏è</div>
                        <div class="stage-text">Email scrape in progress</div>
                    </div>
                    <div class="progress-stage" id="stage3">
                        <div class="stage-icon">ü§ñ</div>
                        <div class="stage-text">Scoring lead potential</div>
                    </div>
                </div>
                <p id="progressStatus" class="progress-status"></p>
            </div>
        </div>
    </div>

    <div id="scoreBreakdownModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="closeScoreBreakdown()">&times;</span>
            <h2 id="scoreModalTitle">Score Breakdown</h2>
            <div id="scoreModalContent">
                <div class="score-breakdown-section">
                    <div class="score-total">
                        <h3>Total Score</h3>
                        <div id="scoreTotal" class="score-total-number">--</div>
                    </div>
                </div>
                
                <div class="score-breakdown-section">
                    <h3>Score Components</h3>
                    <div id="scoreComponents"></div>
                </div>
                
                <div class="score-breakdown-section">
                    <h3>Summary</h3>
                    <p id="scoreSummary">--</p>
                </div>
                
                <div class="score-breakdown-section">
                    <h3>Top Recommendation</h3>
                    <p id="scoreRecommendation">--</p>
                </div>
                
                <div class="score-breakdown-section">
                    <button id="composeFromScoreBtn" onclick="composeEmailFromScore()" class="btn-primary" style="width: 100%; padding: 12px; font-size: 1rem; background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        ‚úâÔ∏è Compose Email Using This Analysis
                    </button>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button id="internalReportBtn" onclick="showInternalReport()" style="flex: 1; padding: 12px; font-size: 0.95rem; background: white; border: 2px solid #8b5cf6; color: #8b5cf6; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                            üìã Internal Report
                        </button>
                        <button id="clientReportBtn" onclick="showClientReportForm()" style="flex: 1; padding: 12px; font-size: 0.95rem; background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%); border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                            üìÑ Client Audit Report
                        </button>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button id="internalPdfBtn" onclick="downloadPdfReport('internal')" style="flex: 1; padding: 10px; font-size: 0.85rem; background: white; border: 1.5px solid #6b7280; color: #374151; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                            üì• Internal PDF
                        </button>
                        <button id="clientPdfBtn" onclick="showClientPdfForm()" style="flex: 1; padding: 10px; font-size: 0.85rem; background: white; border: 1.5px solid #7c3aed; color: #7c3aed; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                            üì• Client PDF
                        </button>
                        <button id="emailPdfBtn" onclick="showEmailPdfForm()" style="flex: 1; padding: 10px; font-size: 0.85rem; background: linear-gradient(135deg, #059669 0%, #10b981 100%); border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                            üìß Email PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="creditsModal" class="modal">
        <div class="modal-content" style="max-width: 750px;">
            <span class="close" onclick="closeCreditsModal()">&times;</span>
            <h2>Credits & Billing</h2>
            <div class="credits-modal-header">
                <div class="current-balance">
                    <span class="balance-label">Your Balance</span>
                    <span class="balance-value" id="modalCreditsBalance">0</span>
                    <span class="balance-label">credits</span>
                </div>
            </div>
            
            <div class="credits-section">
                <h3>Credit Costs</h3>
                <div class="credit-costs-grid">
                    <div class="credit-cost-item">
                        <span class="cost-action">AI Lead Scoring</span>
                        <span class="cost-value">1 credit/lead</span>
                    </div>
                    <div class="credit-cost-item">
                        <span class="cost-action">Send Email</span>
                        <span class="cost-value">Free</span>
                    </div>
                    <div class="credit-cost-item">
                        <span class="cost-action">Send SMS</span>
                        <span class="cost-value">2 credits/SMS</span>
                    </div>
                    <div class="credit-cost-item">
                        <span class="cost-action">AI Personalization</span>
                        <span class="cost-value">1 credit/email</span>
                    </div>
                </div>
            </div>
            
            <div class="credits-section">
                <h3>Buy Credits</h3>
                <div class="credit-packages-grid">
                    <div class="credit-package" onclick="purchaseCredits('starter', event)">
                        <div class="package-name">Starter</div>
                        <div class="package-credits">100 credits</div>
                        <div class="package-price">$15</div>
                        <button class="package-btn">Buy Now</button>
                    </div>
                    <div class="credit-package featured" onclick="purchaseCredits('professional', event)">
                        <div class="package-badge">Best Value</div>
                        <div class="package-name">Professional</div>
                        <div class="package-credits">500 credits</div>
                        <div class="package-price">$59</div>
                        <button class="package-btn">Buy Now</button>
                    </div>
                    <div class="credit-package" onclick="purchaseCredits('pro_team', event)">
                        <div class="package-name">Pro Team</div>
                        <div class="package-credits">2,000 credits</div>
                        <div class="package-price">$199</div>
                        <button class="package-btn">Buy Now</button>
                    </div>
                </div>
                <div id="foundingMemberPackage" class="credit-package" onclick="purchaseCredits('founding_member', event)" style="margin-top: 12px; background: linear-gradient(135deg, rgba(124,58,237,0.08), rgba(249,115,22,0.08)); border: 2px solid #7C3AED; cursor: pointer; padding: 16px; border-radius: 12px; text-align: center;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap;">
                        <span style="background: linear-gradient(135deg, #7C3AED, #F97316); color: white; padding: 3px 10px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">LIMITED</span>
                        <span style="font-weight: 700; color: #1a1a2e;">Founding Member</span>
                        <span style="color: #6b7280;">2,000 credits</span>
                        <span style="font-weight: 700; color: #7C3AED; font-size: 1.1rem;">$99</span>
                        <span style="color: #ef4444; font-size: 0.85rem; text-decoration: line-through;">$199</span>
                        <span id="modalFoundingSlots" style="color: #F97316; font-weight: 600; font-size: 0.85rem;"></span>
                    </div>
                </div>
            </div>

            <div class="credits-section">
                <h3>Payment History</h3>
                <div id="paymentHistory" class="transaction-history">
                    <p class="empty-state">No payments yet</p>
                </div>
            </div>
            
            <div class="credits-section">
                <h3>Credit Activity</h3>
                <div id="transactionHistory" class="transaction-history">
                    <p class="empty-state">No transactions yet</p>
                </div>
            </div>
        </div>
    </div>

    <div id="csvImportModal" class="modal-overlay" style="display:none;" onclick="if(event.target===this)closeCsvImportModal()">
        <div class="modal-content csv-import-modal">
            <div class="modal-header">
                <h3>Import Leads from CSV</h3>
                <button class="modal-close" onclick="closeCsvImportModal()">&times;</button>
            </div>
            <div id="csvUploadView">
                <p style="color:#666;font-size:13px;margin-bottom:12px;">Download the template, fill in your leads, then upload it here.</p>
                <p style="color:#888;font-size:12px;margin-bottom:16px;">We'll score each website using 15+ AI signals - same analysis as search results. 1 credit per website.</p>
                <button onclick="downloadCsvTemplate()" style="background:#f5f3ff;color:#7C3AED;border:1px solid #e9e5ff;padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:600;margin-bottom:16px;font-size:13px;">Download Template</button>
                <div id="csvDropZone" class="csv-drop-zone" onclick="document.getElementById('csvFileInput').click()">
                    <div class="csv-drop-icon">+</div>
                    <p style="font-weight:600;margin-bottom:4px;">Drag & drop your CSV file here</p>
                    <p style="color:#888;font-size:12px;">or click to browse files</p>
                    <input type="file" id="csvFileInput" accept=".csv" style="display:none;" onchange="handleCsvFileSelect(this.files[0])" />
                </div>
                <div id="csvFileError" style="color:#ef4444;font-size:13px;margin-top:8px;display:none;"></div>
            </div>
            <div id="csvPreviewView" style="display:none;">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                    <span id="csvPreviewSummary" style="font-weight:600;color:#333;font-size:14px;"></span>
                    <button onclick="resetCsvUpload()" style="background:none;border:none;color:#888;cursor:pointer;font-size:12px;text-decoration:underline;">Choose different file</button>
                </div>
                <div class="csv-preview-table-wrap">
                    <table id="csvPreviewTable" class="csv-preview-table">
                        <thead id="csvPreviewHead"></thead>
                        <tbody id="csvPreviewBody"></tbody>
                    </table>
                </div>
                <div style="display:flex;gap:12px;margin-top:16px;justify-content:flex-end;">
                    <button onclick="closeCsvImportModal()" style="padding:10px 24px;border-radius:8px;border:1px solid #ddd;background:white;cursor:pointer;font-size:14px;">Cancel</button>
                    <button id="csvImportBtn" onclick="submitCsvImport()" style="padding:10px 24px;border-radius:8px;border:none;background:linear-gradient(135deg,#7C3AED,#8b5cf6);color:white;cursor:pointer;font-weight:600;font-size:14px;">Import & Score</button>
                </div>
            </div>
        </div>
    </div>

    <div id="addCreditsModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.6); z-index:99999; justify-content:center; align-items:center;">
        <div style="background:#fff; border-radius:12px; padding:30px; max-width:400px; width:90%; box-shadow:0 20px 60px rgba(0,0,0,0.3);">
            <h3 style="margin:0 0 15px 0; color:#1a1a2e;">Add Credits</h3>
            <p style="color:#6b7280; margin-bottom:15px;">Adding credits to: <strong id="addCreditsUserEmail"></strong></p>
            <input type="hidden" id="addCreditsUserId" />
            <div style="margin-bottom:12px;">
                <label style="display:block; font-weight:600; margin-bottom:4px; color:#374151;">Amount:</label>
                <input type="number" id="addCreditsAmount" placeholder="Enter amount" min="1" value="100" style="width:100%; padding:10px; border:1px solid #d1d5db; border-radius:8px; font-size:14px; box-sizing:border-box;" />
            </div>
            <div style="margin-bottom:12px;">
                <label style="display:block; font-weight:600; margin-bottom:4px; color:#374151;">Reason (optional):</label>
                <input type="text" id="addCreditsReason" placeholder="e.g., Promotional credits" value="Admin credit adjustment" style="width:100%; padding:10px; border:1px solid #d1d5db; border-radius:8px; font-size:14px; box-sizing:border-box;" />
            </div>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button onclick="confirmAddCredits()" style="flex:1; padding:12px; background:linear-gradient(135deg,#8b5cf6,#6366f1); color:#fff; border:none; border-radius:8px; font-weight:600; cursor:pointer; font-size:14px;">Add Credits</button>
                <button onclick="closeAddCreditsModal()" style="flex:1; padding:12px; background:#e5e7eb; color:#374151; border:none; border-radius:8px; font-weight:600; cursor:pointer; font-size:14px;">Cancel</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js?v=20260216a"></script>
    <script src="/mobile-interactions.js"></script>
</body>
</html>
